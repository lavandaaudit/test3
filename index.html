<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>GEOMETRIC CHAOS · DYNAMIC GEOMETRY</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
  margin:0; padding:0;
  background:#000;
  overflow:hidden;
  height:100%;
  font-family:'Courier New', monospace;
  color:#0af;
}
canvas { display:block; }
#hud {
  position:absolute;
  top:16px; left:16px;
  font-size:13px;
  opacity:0.7;
  pointer-events:none;
  letter-spacing:1px;
}
#data {
  position:absolute;
  bottom:60px; left:16px;
  font-size:10px;
  opacity:0.6;
  pointer-events:none;
  max-width:420px;
  line-height:1.4;
}
#data .real { color:#0f0; font-weight:bold; }
#data .fallback { color:#888; }
#data .warning { color:#ff0; }
#clock {
  position:absolute;
  bottom:16px; right:16px;
  font-size:11px;
  opacity:0.45;
  color:#6cf;
  text-align:right;
  pointer-events:none;
  line-height:1.3;
}
#status {
  position:absolute;
  top:40px; left:16px;
  font-size:11px;
  opacity:0.6;
  color:#0af;
}
#description {
  position:absolute;
  bottom:16px;
  left:16px;
  max-width:520px;
  font-size:9px;
  line-height:1.45;
  opacity:0.35;
  color:#7fbfd9;
  pointer-events:none;
  text-transform: lowercase;
}
</style>
</head>
<body>

<div id="hud">GEOMETRIC CHAOS — DYNAMIC GEOMETRY</div>
<div id="status"></div>
<div id="data">ініціалізація...</div>
<div id="clock">—</div>

<div id="description">
фізико-геометрична система в реальному часі. <br>
всі геометричні форми, рух, світіння та шум є результатом взаємодії
реальних планетарних даних: сейсмічної активності, магнітного поля,
атмосферних параметрів, океанських хвиль та сонячної активності. <br>
це не візуальний ефект і не абстракція — це симуляція динамічного стану
планети, де дані трансформуються у геометрію, а хаос виступає
інтегральним показником нестабільності системи.
</div>

<canvas id="c"></canvas>

<script>
/* ================== BASIC ================== */
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
const dataDiv = document.getElementById('data');
const clockDiv = document.getElementById('clock');
const statusDiv = document.getElementById('status');

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

/* ================== TIME ================== */
const startTime = Date.now();
function formatRelativeTime(ms){
  const s = Math.floor(ms/1000);
  if(s<60) return `+${s}s`;
  const m = Math.floor(s/60), sec=s%60;
  if(m<60) return `+${m}m ${sec}s`;
  const h=Math.floor(m/60), min=m%60;
  return `+${h}h ${min}m`;
}
function updateClock(){
  const now=new Date();
  clockDiv.innerHTML =
    `${String(now.getHours()).padStart(2,'0')}:`+
    `${String(now.getMinutes()).padStart(2,'0')}:`+
    `${String(now.getSeconds()).padStart(2,'0')}<br>`+
    formatRelativeTime(Date.now()-startTime);
}
setInterval(updateClock,1000); updateClock();

/* ================== STARS ================== */
const stars=[];
for(let i=0;i<320;i++){
  stars.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    size:Math.random()*1.4+0.4,
    baseAlpha:Math.random()*0.4+0.25,
    twinkle:Math.random()*0.015+0.006
  });
}

/* ================== DATA ================== */
let realData={
  seismic:0.5,
  magnetic:0.5,
  atmosphere_wind:0.5,
  atmosphere_pressure:0.5,
  atmosphere_temp:0.5,
  ocean:0.5,
  solar_radiation:0.5,
  solar_wind:0.5,
  precipitation:0.5,
  chaos:0.5
};
let dataHistory={};
Object.keys(realData).forEach(k=>dataHistory[k]=[]);
let sources={};

/* ================== UTILS ================== */
function lerp(a,b,t){ return a+(b-a)*t; }

/* ======== GLOBAL INFLUENCE (ALL 10) ======== */
function globalInfluence(){
  const d=realData;
  return {
    timeScale: 0.4 + d.atmosphere_temp*1.2 + d.solar_radiation*0.6 + d.chaos*0.9,
    distortion: d.seismic*0.6 + d.ocean*0.5 + d.chaos,
    turbulence: d.atmosphere_wind*0.7 + d.precipitation*0.6 + d.chaos*0.8,
    density: d.atmosphere_pressure*0.8 + d.magnetic*0.5,
    glow: d.solar_radiation*0.9 + d.solar_wind*0.6,
    fracture: d.solar_wind*0.7 + d.precipitation*0.6 + d.chaos,
    stability: 1 - (d.chaos*0.6 + d.seismic*0.4)
  };
}

/* ================== FETCH REAL DATA ================== */
/* --- код fetch залишено без скорочень --- */
