<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>GEOMETRIC CHAOS · DATA-DRIVEN GEOMETRY</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:#000;
  overflow:hidden;
  font-family:"Courier New",monospace;
  color:#9fe7ff;
}

canvas{
  position:fixed;
  inset:0;
  z-index:0;
}

#panel{
  position:fixed;
  top:0;
  left:0;
  width:260px;
  height:100%;
  background:rgba(0,0,0,0.55);
  border-right:1px solid rgba(120,180,255,0.15);
  padding:12px;
  box-sizing:border-box;
  z-index:2;
}

#panel h1{
  font-size:13px;
  margin:0 0 8px 0;
  font-weight:normal;
  letter-spacing:1px;
}

#data{
  font-size:11px;
  line-height:1.45;
  white-space:pre;
  margin-bottom:12px;
}

#graph{
  width:100%;
  height:160px;
  border:1px solid rgba(120,180,255,0.15);
}

#info{
  position:fixed;
  bottom:8px;
  left:50%;
  transform:translateX(-50%);
  font-size:10px;
  opacity:0.35;
  text-align:center;
  max-width:90%;
  z-index:2;
}
</style>
</head>
<body>

<canvas id="c"></canvas>

<div id="panel">
  <h1>PHYSICAL DATA</h1>
  <div id="data"></div>
  <canvas id="graph"></canvas>
</div>

<div id="info">
фізико-геометрична система. симуляція реальних та модельованих даних. 
кожен показник відповідає окремій фігурі.
</div>

<script>
/* ===================== CANVAS ===================== */
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
let w,h,cx,cy;

function resize(){
  w=canvas.width=innerWidth;
  h=canvas.height=innerHeight;
  cx=w/2;
  cy=h/2;
}
addEventListener("resize",resize);
resize();

/* ===================== GRAPH ===================== */
const gCanvas=document.getElementById("graph");
const gCtx=gCanvas.getContext("2d");
gCanvas.width=236;
gCanvas.height=160;

/* ===================== TIME ===================== */
let t=0;

/* ===================== DATA ===================== */
const data={
  seismic:0.3,
  magnetic:0.4,
  atmosphere_wind:0.5,
  atmosphere_pressure:0.5,
  atmosphere_temp:0.5,
  ocean:0.5,
  solar_radiation:0.5,
  solar_wind:0.5,
  precipitation:0.5,
  chaos:0.35
};

/* ===================== HISTORY ===================== */
const history=[];
const HISTORY_LEN=200;

/* ===================== DATA UPDATE ===================== */
function updateData(){
  for(const k in data){
    data[k]+= (Math.random()-0.5)*0.01;
    data[k]=Math.max(0,Math.min(1,data[k]));
  }
  history.push(data.chaos);
  if(history.length>HISTORY_LEN) history.shift();
}

/* ===================== PANEL ===================== */
const dataDiv=document.getElementById("data");
function drawPanel(){
  let out="";
  for(const k in data){
    out+=k.padEnd(22," ")+" "+data[k].toFixed(2)+"\n";
  }
  dataDiv.textContent=out;
}

/* ===================== GRAPH ===================== */
function drawGraph(){
  gCtx.clearRect(0,0,gCanvas.width,gCanvas.height);
  gCtx.strokeStyle="rgba(120,200,255,0.6)";
  gCtx.beginPath();
  history.forEach((v,i)=>{
    const x=i/HISTORY_LEN*gCanvas.width;
    const y=gCanvas.height-(v*gCanvas.height);
    if(i===0) gCtx.moveTo(x,y);
    else gCtx.lineTo(x,y);
  });
  gCtx.stroke();
}

/* ===================== STARS ===================== */
const stars=[];
for(let i=0;i<400;i++){
  stars.push({
    x:Math.random()*w,
    y:Math.random()*h,
    s:Math.random()*1.5+0.3,
    p:Math.random()*Math.PI*2
  });
}

/* ===================== FIGURE SETTINGS ===================== */
const figures=[
  {param:"seismic", type:"circle", color:[255,100,100]},
  {param:"magnetic", type:"triangle", color:[100,180,255]},
  {param:"atmosphere_wind", type:"square", color:[100,255,160]},
  {param:"atmosphere_pressure", type:"pentagon", color:[255,180,60]},
  {param:"atmosphere_temp", type:"hexagon", color:[255,100,200]},
  {param:"ocean", type:"star", color:[100,200,255]},
  {param:"solar_radiation", type:"circle", color:[255,240,100]},
  {param:"solar_wind", type:"triangle", color:[200,120,255]},
  {param:"precipitation", type:"square", color:[100,220,255]},
  {param:"chaos", type:"hexagon", color:[255,255,255]}
];

/* ===================== DRAW FIGURE ===================== */
function drawFigure(f,v,i){
  const angle=t*0.2 + i;
  const radius=60+v*120;
  const sidesMap={circle:30,triangle:3,square:4,pentagon:5,hexagon:6,star:5};
  const sides=sidesMap[f.type]||3;

  ctx.beginPath();
  for(let s=0;s<=sides;s++){
    let a=(Math.PI*2/sides)*s;
    if(f.type==="star"){
      a=a*2;
    }
    const r=(f.type==="circle"||f.type==="star")?radius:radius*(0.8+0.2*Math.sin(t+i));
    const x=cx+Math.cos(a+angle)*r;
    const y=cy+Math.sin(a+angle)*r;
    if(s===0) ctx.moveTo(x,y);
    else ctx.lineTo(x,y);
  }
  ctx.closePath();
  ctx.strokeStyle=`rgba(${f.color[0]},${f.color[1]},${f.color[2]},${0.05+v*0.3})`;
  ctx.lineWidth=0.8+v*2;
  ctx.stroke();
}

/* ===================== ATTRACTOR ===================== */
let ax=0,ay=0,az=0;
function stepAttractor(){
  const sigma=10+data.magnetic*10;
  const rho=28+data.chaos*25;
  const beta=2.66;

  const dx=sigma*(ay-ax);
  const dy=ax*(rho-az)-ay;
  const dz=ax*ay-beta*az;

  ax+=dx*0.003;
  ay+=dy*0.003;
  az+=dz*0.003;
}

/* ===================== LOOP ===================== */
function loop(){
  updateData();
  drawPanel();
  drawGraph();

  t+=0.01+data.atmosphere_temp*0.01;

  ctx.fillStyle="rgba(0,0,0,0.18)";
  ctx.fillRect(0,0,w,h);

  /* ---- star field ---- */
  stars.forEach(s=>{
    const n=Math.sin(t+s.p)*data.atmosphere_wind*2;
    ctx.fillStyle=`rgba(180,220,255,${0.12+data.solar_radiation*0.3})`;
    ctx.fillRect(s.x+n,s.y+n,s.s,s.s);
  });

  /* ---- draw figures per parameter ---- */
  figures.forEach((f,i)=>{
    const v=data[f.param]||0.5;
    drawFigure(f,v,i);
  });

  /* ---- attractor overlay ---- */
  stepAttractor();
  ctx.save();
  ctx.translate(cx,cy);
  ctx.beginPath();
  ctx.strokeStyle=`rgba(255,120,200,${0.1+data.chaos*0.3})`;
  ctx.lineWidth=1;
  ctx.lineTo(ax*8,ay*8);
  ctx.stroke();
  ctx.restore();

  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
