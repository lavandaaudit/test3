<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>IBONARIUM · PHYSICO–GEOMETRIC SYSTEM</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:#000;
  overflow:hidden;
  font-family:"Courier New",monospace;
  color:#9fe7ff;
}
canvas{
  position:fixed;
  inset:0;
}
#info{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  font-size:10px;
  opacity:0.45;
  letter-spacing:0.5px;
  text-align:center;
  max-width:90%;
}
</style>
</head>

<body>
<canvas id="c"></canvas>

<div id="info">
фізико-геометрична система. візуальна симуляція реальних та модельованих даних планетарних процесів.
геометрія реагує на магнітні, атмосферні, океанічні, сейсмічні та сонячні змінні в реальному часі.
</div>

<script>
/* ====================== CANVAS ====================== */
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
let w,h,cx,cy;

function resize(){
  w=canvas.width=window.innerWidth;
  h=canvas.height=window.innerHeight;
  cx=w/2;
  cy=h/2;
}
window.addEventListener("resize",resize);
resize();

/* ====================== TIME ====================== */
let t=0;

/* ====================== DATA ====================== */
/* normalized 0..1 — імітація реальних потоків */
const realData={
  seismic:0.3,
  magnetic:0.4,
  atmosphere_wind:0.5,
  atmosphere_pressure:0.6,
  atmosphere_temp:0.5,
  ocean:0.4,
  solar_radiation:0.5,
  solar_wind:0.4,
  precipitation:0.2,
  chaos:0.35
};

/* ====================== DATA DRIFT ====================== */
function updateData(){
  Object.keys(realData).forEach(k=>{
    realData[k]+= (Math.random()-0.5)*0.01;
    if(realData[k]<0) realData[k]=0;
    if(realData[k]>1) realData[k]=1;
  });
}

/* ====================== GLOBAL INFLUENCE ====================== */
function globalInfluence(){
  const d=realData;
  return{
    time:0.6 + d.atmosphere_temp + d.chaos,
    distortion:d.seismic*0.7 + d.ocean*0.5 + d.chaos,
    turbulence:d.atmosphere_wind + d.precipitation + d.chaos,
    density:d.atmosphere_pressure + d.magnetic,
    glow:d.solar_radiation + d.solar_wind,
    stability:1-(d.chaos*0.7+d.seismic*0.3)
  };
}

/* ====================== STARS ====================== */
const stars=[];
for(let i=0;i<300;i++){
  stars.push({
    x:Math.random()*w,
    y:Math.random()*h,
    s:Math.random()*1.5+0.3,
    p:Math.random()*Math.PI*2
  });
}

/* ====================== ATTRACTOR ====================== */
/* lorenz-like system */
let ax=0.1, ay=0, az=0;

function stepAttractor(){
  const sigma=10 + realData.magnetic*10;
  const rho=28 + realData.chaos*20;
  const beta=2.66;

  const dx=sigma*(ay-ax);
  const dy=ax*(rho-az)-ay;
  const dz=ax*ay-beta*az;

  ax+=dx*0.005;
  ay+=dy*0.005;
  az+=dz*0.005;
}

/* ====================== DRAW ====================== */
function loop(){
  updateData();
  const G=globalInfluence();
  t+=0.01*G.time;

  ctx.fillStyle="rgba(0,0,0,0.25)";
  ctx.fillRect(0,0,w,h);

  /* ----- stars ----- */
  ctx.fillStyle="#9fe7ff";
  stars.forEach(s=>{
    const n=Math.sin(t+s.p)*G.turbulence;
    ctx.globalAlpha=0.2+G.glow*0.4;
    ctx.fillRect(
      s.x+n*2,
      s.y+n*2,
      s.s,
      s.s
    );
  });
  ctx.globalAlpha=1;

  /* ----- central polygons ----- */
  for(let i=0;i<6;i++){
    const sides=3+i+Math.floor(realData.magnetic*5);
    const base=120+i*45;
    ctx.beginPath();
    for(let j=0;j<=sides;j++){
      const a=j/sides*Math.PI*2 + t*0.2;
      const r=
        base +
        Math.sin(t+i+j)*80*G.distortion;

      const x=cx+Math.cos(a)*r;
      const y=cy+Math.sin(a)*r;
      if(j===0) ctx.moveTo(x,y);
      else ctx.lineTo(x,y);
    }
    ctx.strokeStyle=`rgba(150,200,255,${0.05+G.glow*0.15})`;
    ctx.lineWidth=0.5+G.density;
    ctx.stroke();
  }

  /* ----- attractor ----- */
  stepAttractor();
  ctx.save();
  ctx.translate(cx,cy);
  ctx.beginPath();
  ctx.strokeStyle=`rgba(255,120,200,${0.15+realData.chaos*0.4})`;
  ctx.lineWidth=1;
  ctx.lineTo(ax*10,ay*10);
  ctx.stroke();
  ctx.restore();

  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
